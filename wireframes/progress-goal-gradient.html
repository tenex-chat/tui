<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Runtime - Progress to 24h Goal</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', Courier, monospace;
            background-color: #1a1a2e;
            color: #ffffff;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        h1 {
            font-size: 24px;
            margin-bottom: 20px;
            border-bottom: 2px solid #444;
            padding-bottom: 10px;
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
            padding: 15px;
            border: 2px solid #444;
            font-size: 12px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border: 2px solid #444;
        }

        .legend-color.red { background-color: #ef4444; }
        .legend-color.orange { background-color: #f59e0b; }
        .legend-color.yellow { background-color: #eab308; }
        .legend-color.cyan { background-color: #06b6d4; }
        .legend-color.blue { background-color: #3b82f6; }
        .legend-color.green { background-color: #22c55e; }

        .chart-row {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            padding: 8px;
            border: 2px solid #333;
            position: relative;
        }

        .chart-row:hover {
            border-color: #555;
        }

        .date-label {
            width: 80px;
            font-size: 12px;
            flex-shrink: 0;
        }

        .bar-container {
            flex-grow: 1;
            margin: 0 10px;
            height: 30px;
            background-color: #0f0f1a;
            border: 2px solid #333;
            display: flex;
            align-items: center;
            position: relative;
        }

        .bar {
            height: 100%;
            border: 2px solid #444;
            min-width: 2px;
            transition: opacity 0.2s;
        }

        .bar:hover {
            opacity: 0.8;
        }

        .bar.red { background-color: #ef4444; }
        .bar.orange { background-color: #f59e0b; }
        .bar.yellow { background-color: #eab308; }
        .bar.cyan { background-color: #06b6d4; }
        .bar.blue { background-color: #3b82f6; }
        .bar.green { background-color: #22c55e; }

        .goal-marker {
            position: absolute;
            left: 33.33%;
            top: -5px;
            bottom: -5px;
            width: 2px;
            background-color: #ffffff;
            z-index: 10;
        }

        .goal-label {
            position: absolute;
            left: 33.33%;
            bottom: -18px;
            transform: translateX(-50%);
            font-size: 10px;
            color: #888;
            white-space: nowrap;
        }

        .duration-label {
            width: 70px;
            text-align: right;
            font-size: 12px;
            flex-shrink: 0;
        }

        .tooltip {
            position: fixed;
            background-color: #2a2a4e;
            border: 2px solid #666;
            padding: 10px;
            font-size: 12px;
            z-index: 100;
            display: none;
            min-width: 150px;
            pointer-events: none;
        }

        .tooltip-row {
            margin: 3px 0;
        }

        .tooltip-label {
            color: #888;
        }

        .tooltip-value {
            color: #fff;
        }

        .tooltip-value.positive {
            color: #22c55e;
        }

        .tooltip-value.negative {
            color: #ef4444;
        }

        .scale-labels {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 10px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Daily Runtime - Progress to 24h Goal</h1>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-color red"></div>
                <span>0-12h: Critical</span>
            </div>
            <div class="legend-item">
                <div class="legend-color orange"></div>
                <span>12-18h: Warning</span>
            </div>
            <div class="legend-item">
                <div class="legend-color yellow"></div>
                <span>18-24h: Approaching</span>
            </div>
            <div class="legend-item">
                <div class="legend-color cyan"></div>
                <span>24-36h: Goal! âœ“</span>
            </div>
            <div class="legend-item">
                <div class="legend-color blue"></div>
                <span>36-48h: Exceeding</span>
            </div>
            <div class="legend-item">
                <div class="legend-color green"></div>
                <span>48h+: Exceptional</span>
            </div>
        </div>

        <div class="scale-labels">
            <span>0h</span>
            <span>24h</span>
            <span>72h</span>
        </div>

        <div id="chart"></div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script>
        const data = [
            {date: "Today", runtime_ms: 93960000, runtime_hours: 26.1},
            {date: "Jan 28", runtime_ms: 43200000, runtime_hours: 12.0},
            {date: "Jan 27", runtime_ms: 167640000, runtime_hours: 46.57},
            {date: "Jan 26", runtime_ms: 52200000, runtime_hours: 14.5},
            {date: "Jan 25", runtime_ms: 101160000, runtime_hours: 28.1},
            {date: "Jan 24", runtime_ms: 95040000, runtime_hours: 26.4},
            {date: "Jan 23", runtime_ms: 180000000, runtime_hours: 50.0},
            {date: "Jan 22", runtime_ms: 36000000, runtime_hours: 10.0},
            {date: "Jan 21", runtime_ms: 108000000, runtime_hours: 30.0},
            {date: "Jan 20", runtime_ms: 57600000, runtime_hours: 16.0},
            {date: "Jan 19", runtime_ms: 259200000, runtime_hours: 72.0},
            {date: "Jan 18", runtime_ms: 43200000, runtime_hours: 12.0},
            {date: "Jan 17", runtime_ms: 82800000, runtime_hours: 23.0},
            {date: "Jan 16", runtime_ms: 21600000, runtime_hours: 6.0}
        ];

        function getBarColor(hours) {
            if (hours < 12) return 'red';
            if (hours < 18) return 'orange';
            if (hours < 24) return 'yellow';
            if (hours < 36) return 'cyan';
            if (hours < 48) return 'blue';
            return 'green';
        }

        function formatDuration(ms) {
            const hours = Math.floor(ms / 3600000);
            const minutes = Math.floor((ms % 3600000) / 60000);
            return `${hours}h ${minutes}m`;
        }

        function calculateDelta(hours) {
            const goalHours = 24;
            const deltaHours = hours - goalHours;
            const absHours = Math.abs(deltaHours);
            const minutes = Math.round((absHours % 1) * 60);
            const displayHours = Math.floor(absHours);
            const sign = deltaHours >= 0 ? '+' : '-';
            return `${sign}${displayHours}h ${minutes}m`;
        }

        function createChart() {
            const chart = document.getElementById('chart');
            const maxHours = 72;

            data.forEach((item, index) => {
                const row = document.createElement('div');
                row.className = 'chart-row';

                const colorClass = getBarColor(item.runtime_hours);
                const barWidth = (item.runtime_hours / maxHours) * 100;
                const duration = formatDuration(item.runtime_ms);

                row.innerHTML = `
                    <div class="date-label">${item.date}</div>
                    <div class="bar-container">
                        <div class="goal-marker"></div>
                        <div class="bar ${colorClass}" style="width: ${barWidth}%"></div>
                    </div>
                    <div class="duration-label">${duration}</div>
                `;

                // Add hover functionality
                const bar = row.querySelector('.bar');
                bar.addEventListener('mouseenter', (e) => showTooltip(e, item));
                bar.addEventListener('mousemove', (e) => moveTooltip(e));
                bar.addEventListener('mouseleave', hideTooltip);

                chart.appendChild(row);
            });
        }

        function showTooltip(e, item) {
            const tooltip = document.getElementById('tooltip');
            const delta = calculateDelta(item.runtime_hours);
            const deltaClass = item.runtime_hours >= 24 ? 'positive' : 'negative';

            tooltip.innerHTML = `
                <div class="tooltip-row">
                    <span class="tooltip-label">Date: </span>
                    <span class="tooltip-value">${item.date}</span>
                </div>
                <div class="tooltip-row">
                    <span class="tooltip-label">Runtime: </span>
                    <span class="tooltip-value">${formatDuration(item.runtime_ms)}</span>
                </div>
                <div class="tooltip-row">
                    <span class="tooltip-label">Hours: </span>
                    <span class="tooltip-value">${item.runtime_hours.toFixed(2)}h</span>
                </div>
                <div class="tooltip-row">
                    <span class="tooltip-label">Delta from 24h: </span>
                    <span class="tooltip-value ${deltaClass}">${delta}</span>
                </div>
            `;

            tooltip.style.display = 'block';
            moveTooltip(e);
        }

        function moveTooltip(e) {
            const tooltip = document.getElementById('tooltip');
            const offsetX = 15;
            const offsetY = 15;

            let left = e.clientX + offsetX;
            let top = e.clientY + offsetY;

            // Prevent tooltip from going off screen
            if (left + tooltip.offsetWidth > window.innerWidth) {
                left = e.clientX - tooltip.offsetWidth - offsetX;
            }
            if (top + tooltip.offsetHeight > window.innerHeight) {
                top = e.clientY - tooltip.offsetHeight - offsetY;
            }

            tooltip.style.left = left + 'px';
            tooltip.style.top = top + 'px';
        }

        function hideTooltip() {
            const tooltip = document.getElementById('tooltip');
            tooltip.style.display = 'none';
        }

        // Initialize chart
        createChart();
    </script>
</body>
</html>